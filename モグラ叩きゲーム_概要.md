# モグラ叩きゲーム 概要

## 一般的なモグラ叩きゲームの概要

「制限時間内に、複数ある穴からランダムに出てくるモグラを、穴に戻る前にハンマーで叩き、何匹モグラを撃退したかを競うゲーム」

- 子供用のおもちゃとして販売されていたり、ゲームコーナーなどに設置されている。
- 家庭用のおもちゃは、モグラを叩いて飛び出させ撃退する。
- ゲームコーナーにあるゲームは、モグラを叩くと穴へ潜り再度穴から出てくるため、何度も撃退することができる。
  - 撃退数をカウントし、ゲームの最後に表示させることで、プレイヤー同士で撃退数を競わせる。

## 操作方法

- SW1：穴①のモグラを叩く
- SW2：穴②のモグラを叩く
- SW3：穴③のモグラを叩く
- SW4：穴④のモグラを叩く
- SW5：ゲームをスタートさせる。タイトル画面へ戻る。

## デバイスの仕様

- 表示
  - 8桁 x 2行 キャラクタLCD 1つ
    - 型番：AE-AQM0802
    - 表示桁数：8桁 x 2行

- 操作用スイッチ
  - プッシュスイッチ(SW1～4) 4つ

- ゲームスタート- ストップ用スイッチ
  - プッシュスイッチ(SW5) 1つ

- ブザー
  - 圧電スピーカー 1つ

〇機能

1. モグラ叩きゲーム
   - ゲームルール
   - 1マスずつ空けて、穴が4つあり、それぞれの穴からモグラがランダムで出現する。
   - モグラの最大出現数は4匹。
	- モグラが出現している間に、穴に対応したスイッチを押すと、モグラを叩くことができる。
	- モグラは叩くか一定時間で消える。
	- モグラの出現時間は、最大2秒、最小0.2秒の間で、時間経過と共に短くなっていく。
	- モグラの出現間隔は、
		- 60秒間に150匹程度
		- 時間経過でランダムに減少
		を満たすものとする。(詳細は今後決定の予定）
	- モグラを叩くと、音が鳴り、スコアが1増加する
	- モグラを叩くと、「叩かれたモグラ」の絵が一定時間表示され、その間、次のモグラは出現しない。
		- 表示時間は今後決定の予定
	- モグラがいない時に叩く（スイッチを押す）と、お手付きとなり、音が鳴りペナルティを受けてしまう。
	- SWが2つ以上同時押しされた場合、それぞれの入力を適用し、並行してモグラの処理を行う。
	- 制限時間は60秒。
	- ペナルティ（お手付きした時）
		※ゲームバランス調整までの案
			- 残り時間 3秒 減少
			- 3秒間、操作不能
		- 制限時間が経過するまで、上記のゲームルールを元にゲームを行う。
		- 制限時間が経過すると、リザルト画面へ移る。

	1. 難易度設定
		- Easy, Nomal, Hardの3種類の難易度がある。
		- 難易度ごとの違い
			- モグラの総出現数が変化する。
			- モグラの最大- 最小表示時間が変化する。（今後検討予定）

	3. ハイスコア記録
		- 選択されているユーザーと難易度別にハイスコアが記録される。
		- 制限時間が経過しゲームが終了した時、
			もし、今回のスコアが現在のハイスコアより高ければ、ハイスコアを記録する。
		- ハイスコアは、電源を切っても保持される。（EEPROMに記録する
		- 最大4人分のハイスコアを記録することができる。
		- 選択されているユーザーと難易度ごとにハイスコアをリセットできる。（手順は画面説明にて記載）

〇画面説明

1. タイトル画面
   - 電源投入時、ゲームタイトルとハイスコアを記録させるユーザーを表示する。
   - ユーザーはSW1～SW4でそれぞれに対応した1人目～4人目と切り替えることができる。
   - スタートスイッチを押すと、難易度設定画面へ移る。
   - SWを2つ以上同時押しをすると何も起こらない。
2. 難易度設定画面
   - Easy, Nomal, Hardの3種類の難易度から順番にSW1～SW3で選択できる。
   - 現在表示されている難易度と選択したユーザーによって、ハイスコアを表示する。
	- SW4を押下すると、ハイスコアクリア確認画面へ移る。
	- スタートスイッチを押すと、3秒のカウントダウンを表示させ、ゲームが開始される。
	- SWを2つ以上同時押しをすると何も起こらない。
3. ハイスコアクリア確認画面
	- 上段に現在選択されているユーザーと難易度に合わせたハイスコアを削除するかどうか確認する文字列が表示される。
		また、下段には、削除する場合に押下するSW1と、削除しない場合に押下するSW4の番号を、YESとNOの文字と共に表示させる。
	- 削除する場合はSW1を押下することで、ハイスコアが0にクリアされ難易度設定画面へ移る。
		削除しない場合はSW4を押下することで、何もせず難易度設定画面へ移る。
		それ以外のSWは何も起きない。
	- SWを2つ以上同時押しをすると何も起こらない。
4. ゲームプレイ画面
	- 上段には現在のスコアと残りの制限時間、下段にはモグラが出現する穴4つが表示される。
	- モグラが出現すると、モグラの穴の絵がモグラの絵に変化する。
	- モグラの絵が表示されている時に、モグラを叩く（対応したSWを押下）すると、
		モグラを撃退でき、モグラの絵がモグラが叩かれた時の絵に変化する。
	- モグラが叩かれた時の絵は、一定時間が経過後、モグラの穴へ変化する。
	- 制限時間が経過すると、ゲームが終了し、リザルト画面に移る。
5. リザルト画面
	- ゲーム終了後、ブザーが一定時間（パターンによって長さは変動する。パターンは今後検討する予定）鳴動し、
		今回のプレイのスコア結果と、選択されているユーザーと難易度に合わせたハイスコアが表示される。
	- スタートスイッチが押されると、タイトル画面へ戻る。

## グラフィック

- パターン
  - 穴
    - モグラがいない時
  - でてきたモグラ
    - モグラが出てきた時
  - やられた時
    - モグラが出てきた時に対応したスイッチを押した時

- 表示例

| S   | 0   | 3   | 2   | T   | 1   | 2   | 0   |
| --- | --- | --- | --- | --- | --- | --- | --- |
|     | _   |     | ∩   |     | _   |     | _   |

※記号説明

- S：スコア
- T：制限時間
- _：モグラの穴
- ∩：モグラ（仮）

## ゲーム画面- 画面遷移

- タイトル画面
  - 電源投入時に表示される。
  - ゲームタイトルとハイスコアを表示させる。
  - いずれかのスイッチを押したら、3秒のカウントダウンの後、ゲーム中画面へ遷移しゲームがスタートされる。
- ゲーム中画面
  - モグラ叩きゲームを行う。プレイ中の画面の詳細は [1.1.グラフィック](#グラフィック) を参照
  - 操作方法は [1.2.操作方法](#操作方法) を参照
  - 制限時間が0になったら、画面を点滅させる
  - いずれかのボタンを押下すると、ゲーム開始画面へ戻る
- ~~中断画面~~
  - スイッチの長押しでゲームの一時停止、終了、再開を選べる画面に移る

## 音

- ゲーム開始前
  - カウントダウンが行われる時に、カウントダウンに合わせて、ブザー音が鳴る

- ゲーム中
  - BGM
    - なし
  - モグラを叩いた時
    - 短く2回鳴動する（音程は要調整）
  - お手付き（モグラがいない時にスイッチを押した）時
    - 少し長く、音程は低めに鳴動する（詳細な音程は要調整）

## 石川さんアイディア

- LEDを残り時間と共に消灯していく
- ボーナスタイム
- お手付き用に4匹から3匹に（後半ほど）